<!DOCTYPE html>
<html lang="en">

<head>
     
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#2A80EE">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#2A80EE">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#2A80EE">
<title>Spring Boot and iBatis with H2 - A Tutorial &#8211; Girish Godage</title>
<meta name="description" content="Learn using Spring Boot Starter myBatis to connect Spring Boot to H2 (in memory database) using Object Mapping Framework - myBatis (iBatis).">
<meta name="keywords" content="SpringBootJPA">

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all">

<!-- Verifications -->
    
    
        
<!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Spring Boot and iBatis with H2 - A Tutorial">
    <meta property="og:description" content="I am a passionate Leader, who has a good command in technology &amp; Mangement. Also, I am a creative designer and an innovatie techie.">
    <meta property="og:url" content="http://localhost:4000/blog/spring-boot-and-iBatis-with-h2-tutorial">
    <meta property="og:site_name" content="Girish Godage">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    
        <meta name="twitter:site" content="@GGodage" />
    
    <meta name="twitter:title" content="Spring Boot and iBatis with H2 - A Tutorial" />
    <meta name="twitter:description" content="Learn using Spring Boot Starter myBatis to connect Spring Boot to H2 (in memory database) using Object Mapping Framework - myBatis (iBatis)." />
    <meta name="twitter:url" content="http://localhost:4000/blog/spring-boot-and-iBatis-with-h2-tutorial" />

    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/img/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/img/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/img/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/img/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/img/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/img/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/img/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
    


    <link rel="canonical" href="http://localhost:4000/blog/spring-boot-and-iBatis-with-h2-tutorial">
<link rel="alternate" type="application/rss+xml" title="RSS Feed for Girish Godage" href="/feed.xml" />
    <!-- Bootstrap CSS-->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <!-- Google fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Advent+Pro">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Varela+Round">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abel">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
   
    <!-- owl carousel-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.carousel.css" >
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.theme.css">
    
    <!-- animate.css-->
    <link rel="stylesheet" href="http://localhost:4000/sitejs/animate.css/animate.css">
    <!-- theme stylesheet-->
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="http://localhost:4000/css/custom.css" as="style">
    <link rel="stylesheet" href="http://localhost:4000/css/comments.css" as="style">
    <!-- Favicon-->
    <link rel="shortcut icon" href="http://localhost:4000/img/logo-big.png">
    <!-- Fab Icon-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-mfizz/2.4.1/font-mfizz.min.css">
    
    

    <!-- Global site tag (gtag.js) - Google Analytics -->
    
    <script type="text/javascript">
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
       ga('create', 'UA-130164763-2', 'auto');
       ga('send', 'pageview');
    </script>
    
    <!-- Typed.js DONT TOUCHHHHHHHHHHHHH!-->
    <!--<script src="https://cdn.rawgit.com/mattboldt/typed.js/master/lib/typed.min.js"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.9/typed.min.js"></script>
    <script>
        function copyToClipboard(element) {
            var $temp = $("<input>");
            $("body").append($temp);
            $temp.val($(element).text()).select();
            document.execCommand("copy");
            $temp.remove();
        }
      </script>
      
      <!-- START OF RELEVANT PART -->
    <script async src="https://just-comments.com/w2.js"></script>
    <!-- END OF RELEVANT PART -->


</head>

<body>
    
<!-- navbar-->
<header class="header">
  <nav class="navbar navbar-expand-lg fixed-top">
    <div class="container"><a class="navbar-brand" href="http://localhost:4000"><img
          src="http://localhost:4000/img/logo-big.png" width="50" height="50" class="d-inline-block align-center"
          alt="logo"> <img src="http://localhost:4000/img/girish_logo.png" height="30" alt="girilogo"></a>
      <button type="button" data-toggle="collapse" data-target="#navbarcollapse" aria-controls="navbarSupportedContent"
        aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler navbar-toggler-right"><span
          class="fa fa-bars" style="color: white"></span></button>
      <div id="navbarcollapse" class="collapse navbar-collapse">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item"><a href="http://localhost:4000#home" class="nav-link  link-scroll">Home</a></li>
          <li class="nav-item"><a href="http://localhost:4000#about" class="nav-link link-scroll">About</a></li>
          <li class="nav-item"><a href="http://localhost:4000#skills" class="nav-link link-scroll">Skills</a>
          </li>
          <li class="nav-item"><a href="http://localhost:4000#services" class="nav-link link-scroll">Services</a>
          </li>
          <li class="nav-item"><a href="http://localhost:4000#references" class="nav-link link-scroll">My
              work</a></li>
          <li class="nav-item"><a href="http://localhost:4000#contact" class="nav-link link-scroll">Contact</a>
          </li>
          <li class="nav-item"><a href="http://localhost:4000/blog" class="nav-link link-scroll">Blog</a></li>
        </ul>
      </div>
    </div>
  </nav>
</header>

    
    
    
    <div style="background-color:Gray;">
        <div style="padding:0;min-height:95.05vh;display:flex;font-family: Poppins, sans-serif;margin-top: 5rem;"
            class="container">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <p class="post-title">
                    <h1><a href="/blog/spring-boot-and-iBatis-with-h2-tutorial">Spring Boot and iBatis with H2 - A Tutorial</a></h1>
                </p>
                
                <span class="post-meta">
              <span style="font-weight:600">October 23, 2019 Wednesday</span>
                    
                       ( 11 minute read ) 
                    
                     
                    <a style="font-weight:600" href="https://twitter.com/girishgodage_007" target="_blank">   by Girish Godage</a>
                </span>
                
                <div class="site-category"> 
                        <h5>SpringBootJPA</h5>
                </div>
                
                <hr>
                <div><img class="post-image" src="/img/springbootjpa.png" alt="Spring Boot and iBatis with H2 - A Tutorial" height="250" /></div>
                <div class="post-content">
                    <br>                     
                    <h2 id="spring-boot-and-ibatis-with-h2">Spring Boot and iBatis with H2</h2>
<p>This guide will help you create a simple project with Spring Boot. You will add code to the project to connect to H2 Database using myBatis. You will learn to write all the basic CRUD methods using myBatis.</p>

<h2 id="you-will-learn">You will learn</h2>
<ul>
  <li>How to connect a Spring Boot project to database using myBatis?</li>
  <li>How to write a simple repository class with all the CRUD methods to execute queries using myBatis?</li>
  <li>How to execute basic queries using myBatis?</li>
  <li>How to create a project using Spring Boot, myBatis and H2?</li>
  <li>What are the basics of an in memory database?</li>
</ul>

<h2 id="project-code-structure">Project Code Structure</h2>

<p>Following screenshot shows the structure of the project we will create.
<img src="/images/SpringBootwithmyBatis-ProjectStructure.png" alt="Image" title="Spring Boot with myBatis - Project Structure" /></p>

<p>A few details:</p>

<ul>
  <li><code class="highlighter-rouge">Student.java</code> - The bean to store student details.</li>
  <li><code class="highlighter-rouge">StudentMyBatisRepository.java</code> - Contains all the methods to store and retrieve student details to the H2 database.</li>
  <li><code class="highlighter-rouge">schema.sql</code> - Since we are using an in memory database, we define the tables as part of our application code in this file.</li>
  <li><code class="highlighter-rouge">data.sql</code> - We use data.sql to populate the initial student data.</li>
  <li>SpringBoot2MyBatisWithH2Application.java - The main Spring Boot Application class which is used to launch up the application. We will extend <code class="highlighter-rouge">CommandLineRunner</code> interface and implement <code class="highlighter-rouge">public void run(String... args)</code> method to launch the spring jdbc code when the server launches up.</li>
  <li><code class="highlighter-rouge">pom.xml</code> - Contains all the dependencies needed to build this project. We will use Spring Boot Starter myBatis and Web other than Developer Tools and H2 as in memory database.</li>
</ul>

<h2 id="tools-you-will-need">Tools you will need</h2>
<ul>
  <li>Maven 3.0+ is your build tool</li>
  <li>Your favorite IDE. We use Eclipse.</li>
  <li>JDK 1.8+</li>
</ul>

<h2 id="complete-maven-project-with-code-examples">Complete Maven Project With Code Examples</h2>
<blockquote>
  <p>Our Github repository has all the code examples - https://github.com/girishgodage/spring-boot-examples/tree/master/spring-boot-2-myBatis-with-h2</p>
</blockquote>

<h2 id="a-little-bit-of-theory">A little bit of Theory</h2>

<p>JDBC</p>
<ul>
  <li>JDBC stands for Java Database Connectivity</li>
  <li>It used concepts like Statement, PreparedStatement and ResultSet</li>
  <li>In the example below, the query used is <code class="highlighter-rouge">Update todo set user=?, desc=?, target_date=?, is_done=? where id=?</code></li>
  <li>The values needed to execute the query are set into the query using different set methods on the PreparedStatement</li>
  <li>Results from the query are populated into the ResultSet. We had to write code to liquidate the ResultSet into objects.</li>
</ul>

<h4 id="update-todo">Update Todo</h4>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Connection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">getConnection</span><span class="o">();</span>

<span class="nc">PreparedStatement</span> <span class="n">st</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span>
		<span class="s">"Update todo set user=?, desc=?, target_date=?, is_done=? where id=?"</span><span class="o">);</span>

<span class="n">st</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">todo</span><span class="o">.</span><span class="na">getUser</span><span class="o">());</span>
<span class="n">st</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">todo</span><span class="o">.</span><span class="na">getDesc</span><span class="o">());</span>
<span class="n">st</span><span class="o">.</span><span class="na">setTimestamp</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Timestamp</span><span class="o">(</span>
		<span class="n">todo</span><span class="o">.</span><span class="na">getTargetDate</span><span class="o">().</span><span class="na">getTime</span><span class="o">()));</span>
<span class="n">st</span><span class="o">.</span><span class="na">setBoolean</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="n">todo</span><span class="o">.</span><span class="na">isDone</span><span class="o">());</span>
<span class="n">st</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="n">todo</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>

<span class="n">st</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>

<span class="n">st</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">connection</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</code></pre></div></div>

<h3 id="spring-jdbc">Spring JDBC</h3>

<ul>
  <li>Spring JDBC provides a layer on top of JDBC</li>
  <li>It used concepts like JDBCTemplate</li>
  <li>Typically needs lesser number of lines compared to JDBC as following are simplified
    <ul>
      <li>mapping parameters to queries</li>
      <li>liquidating resultsets to beans</li>
      <li>zero exception handling needed because all exceptions are converted to RuntimeExceptions.</li>
    </ul>
  </li>
</ul>

<h3 id="mybatis">myBatis</h3>

<p>MyBatis removes the need for manually writing code to set parameters and retrieve results. It provides simple XML or Annotation based configuration to map Java POJOs to database.</p>

<p>We compare the approaches used to write queries below:</p>

<ul>
  <li>JDBC or Spring JDBC - <code class="highlighter-rouge">Update todo set user=?, desc=?, target_date=?, is_done=? where id=?</code></li>
  <li>myBatis - <code class="highlighter-rouge">Update todo set user=#{user}, desc=#{desc}, target_date=#{targetDate}, is_done=#{isDone} where id=#{id}</code></li>
</ul>

<h4 id="update-todo-and-retrieve-todo">Update Todo and Retrieve Todo</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Mapper</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">TodoMybatisService</span>
		<span class="kd">extends</span> <span class="nc">TodoDataService</span> <span class="o">{</span>

	<span class="nd">@Override</span>
	<span class="nd">@Update</span><span class="o">(</span><span class="s">"Update todo set user=#{user}, desc=#{desc}, target_date=#{targetDate}, is_done=#{isDone} where id=#{id}"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateTodo</span><span class="o">(</span><span class="nc">Todo</span> <span class="n">todo</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">SQLException</span><span class="o">;</span>

	<span class="nd">@Override</span>
	<span class="nd">@Select</span><span class="o">(</span><span class="s">"SELECT * FROM TODO WHERE id = #{id}"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">Todo</span> <span class="nf">retrieveTodo</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">SQLException</span><span class="o">;</span>
<span class="o">}</span>

</code></pre></div></div>

<h2 id="creating-the-project-with-spring-initializr">Creating the Project with Spring Initializr</h2>

<p>Creating a REST service with Spring Initializr is a cake walk. We will use Spring Web MVC as our web framework.</p>

<p>Spring Initializr <a href="http://start.spring.io/" target="_blank">http://start.spring.io/</a> is great tool to bootstrap your Spring Boot projects.</p>

<p><img src="/images/spring-initializer-web-h2-devtools-jdbc.png" alt="Image" title="Web, JDBC,H2 and Developer Tools" /></p>

<p>As shown in the image above, following steps have to be done</p>

<ul>
  <li>Launch Spring Initializr and choose the following
    <ul>
      <li>Choose <code class="highlighter-rouge">com.girishgodage.springboot.rest.example</code> as Group</li>
      <li>Choose <code class="highlighter-rouge">spring-boot-2-jdbc-with-h2</code> as Artifact</li>
      <li>Choose following dependencies
        <ul>
          <li>Web</li>
          <li>H2</li>
          <li>DevTools</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Click Generate Project.</li>
  <li>Import the project into Eclipse. File -&gt; Import -&gt; Existing Maven Project.</li>
  <li>If you want to understand all the files that are part of this project, you can go here TODO.</li>
</ul>

<h2 id="add-the-mybatis-starter-to-pomxml">Add the myBatis starter to pom.xml</h2>

<p>myBatis is not a standard Spring Boot Starter project. We would need to add it manually to pom.xml.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;dependency&gt;
	&lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
	&lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
	&lt;version&gt;1.2.1&lt;/version&gt;
&lt;/dependency&gt;

</code></pre></div></div>

<p>Rebuild the project to see all the dependencies related to myBatis.
<img src="/images/myBatisDependencies.png" alt="Image" title="my Batis Dependencies" /></p>

<h2 id="initialize-h2-in-memory-database-with-the-schema">Initialize H2 in-memory database with the schema</h2>

<p>We will use H2 as the database.</p>

<p>H2 provides a web interface called H2 Console to see the data. Let’s enable h2 console in the application.properties</p>

<p>/src/main/resources/application.properties</p>
<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Enabling H2 Console
</span><span class="py">spring.h2.console.enabled</span><span class="p">=</span><span class="s">true</span>
</code></pre></div></div>
<p>When you reload the application, you can launch up H2 Console at http://localhost:8080/h2-console.</p>

<p><img src="/images/H2-Console-Login-Page.png" alt="Image" title="H2 Console Login PAge" /></p>

<blockquote>
  <p>Tip - Make sure that you use <code class="highlighter-rouge">jdbc:h2:mem:testdb</code> as JDBC URL.</p>
</blockquote>

<p>When you use the right JDBC URL given above, you should see an empty schema when you click <code class="highlighter-rouge">Connect</code> button.
<img src="/images/H2-Console-Empty-Schema.png" alt="Image" title="H2 Console Empty Page" /></p>

<h3 id="create-schema-using-schemasql-and-data-using-datasql">Create Schema using schema.sql and Data using data.sql</h3>

<p>We will create a table called student with few simple columns. We can initialize a schema by create a <code class="highlighter-rouge">schema.sql</code> file in the resources.</p>

<p>/src/main/resources/schema.sql</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>create table student
(
   id integer not null,
   name varchar(255) not null,
   passport_number varchar(255) not null,
   primary key(id)
);
</code></pre></div></div>

<p>Let’s also populate some data into the student table.</p>

<p>/src/main/resources/data.sql</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>insert into student
values(10001,'Ranga', 'E1234567');

insert into student
values(10002,'Ravi', 'A1234568');
</code></pre></div></div>

<p>When the application reloads you would see following statements in the log indicating that the sql files are picked up</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Executing SQL script from URL [file:PATH/schema.sql]
Executing SQL script from URL [file:PATH/data.sql]
</code></pre></div></div>

<p>When you login to H2 Console (http://localhost:8080/h2-console) you can see that the student table is created and the data is populated.
<img src="/images/H2-Console-With-Student.png" alt="Image" title="H2 Console With Student" /></p>

<h2 id="creating-student-bean">Creating Student Bean</h2>

<p>Lets create a simple Student bean with basic student information along with getters, setters and a toString method.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">girishgodage</span><span class="o">.</span><span class="na">springboot</span><span class="o">.</span><span class="na">jdbc</span><span class="o">.</span><span class="na">h2</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">student</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Student</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">passportNumber</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">Student</span><span class="o">()</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nf">Student</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">passportNumber</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
		<span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">passportNumber</span> <span class="o">=</span> <span class="n">passportNumber</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nf">Student</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">passportNumber</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">passportNumber</span> <span class="o">=</span> <span class="n">passportNumber</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nc">Long</span> <span class="nf">getId</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">id</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setId</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPassportNumber</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">passportNumber</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPassportNumber</span><span class="o">(</span><span class="nc">String</span> <span class="n">passportNumber</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">passportNumber</span> <span class="o">=</span> <span class="n">passportNumber</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"Student [id=%s, name=%s, passportNumber=%s]"</span><span class="o">,</span> <span class="n">id</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">passportNumber</span><span class="o">);</span>
	<span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>
<h2 id="create-repository-method-to-read-student-information">Create Repository method to Read Student information</h2>

<p>We would want to start with creating a simple repository. <code class="highlighter-rouge">@Mapper</code> indicates that this is an myBatis mapper class.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Mapper</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">StudentMyBatisRepository</span> <span class="o">{</span>

<span class="o">}</span>

</code></pre></div></div>
<blockquote>
  <p>Spring Boot Auto Configuration sees H2 in the classpath. It understands that we would want to talk to an in memory database. It auto configures a datasource and also a JdbcTemplate connecting to that datasource.</p>
</blockquote>

<p>Let’s create the findById method to retrieve a student by id in StudentJdbcRepository.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Select</span><span class="o">(</span><span class="s">"SELECT * FROM student WHERE id = #{id}"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">Student</span> <span class="nf">findById</span><span class="o">(</span><span class="kt">long</span> <span class="n">id</span><span class="o">);</span>
</code></pre></div></div>

<p>Notes</p>
<ul>
  <li><code class="highlighter-rouge">@Select("SELECT * FROM student WHERE id = #{id}")</code> - <code class="highlighter-rouge">@Select</code> highlights that this is a select query. <code class="highlighter-rouge">#{id}</code> is used to indicate that id is a parameter to this query.</li>
  <li>You can observe that are defining a simple interface method without the implementation.</li>
</ul>

<p>We would want to execute findById method. To keep things simple we will make the SpringBoot2MyBatisWithH2Application class implement CommandLineRunner and implement run method to call the findById method on the repository.</p>

<p>/src/main/java/com/girishgodage/springboot/jdbc/h2/example/SpringBoot2JdbcWithH2Application.java</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@SpringBootApplication</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringBoot2MyBatisWithH2Application</span> <span class="kd">implements</span> <span class="nc">CommandLineRunner</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="nc">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="nc">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>

	<span class="nd">@Autowired</span>
	<span class="nc">StudentMyBatisRepository</span> <span class="n">repository</span><span class="o">;</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="nc">SpringBoot2MyBatisWithH2Application</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="nc">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>

		<span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Student id 10001 -&gt; {}"</span><span class="o">,</span> <span class="n">repository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="mi">10001L</span><span class="o">));</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Notes</p>
<ul>
  <li><code class="highlighter-rouge">@Autowired StudentMyBatisRepository repository;</code> - We will autowire StudentMyBatisRepository we created earlier.</li>
  <li><code class="highlighter-rouge">public void run(String... args) throws Exception {</code> - Implement the run method defined in the CommandLineRunner interface. This method is executed as soon as the application is launched up.</li>
  <li><code class="highlighter-rouge">logger.info("Student id 10001 -&gt; {}", repository.findById(10001L))</code> - Log all the information about student id 10001.</li>
</ul>

<p>When the application reloads you will see this in the log.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Student id 10001 -&gt; Student [id=10001, name=Ranga, passportNumber=E1234567]
</code></pre></div></div>
<blockquote>
  <p>Congratulations on executing the first myBatis method! You can see how easy it is with Spring Boot.</p>
</blockquote>

<p>Let’s now add another method to retrieve details of all the students to StudentJdbcRepository.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Select</span><span class="o">(</span><span class="s">"select * from student"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">();</span>
</code></pre></div></div>
<p>Notes</p>
<ul>
  <li><code class="highlighter-rouge">@Select("select * from student")</code> - Since we want to return a list of students, we do not need to pass any parameters. Its a simple <code class="highlighter-rouge">@Select</code> query.</li>
</ul>

<p>We can add a call to find all method in the run method of <code class="highlighter-rouge">SpringBoot2MyBatisWithH2Application.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"All users 1 -&gt; {}"</span><span class="o">,</span> <span class="n">repository</span><span class="o">.</span><span class="na">findAll</span><span class="o">());</span>

</code></pre></div></div>

<p>You can see following output in the log when the project reloads.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>All users 1 -&gt; [Student [id=10001, name=Ranga, passportNumber=E1234567], Student [id=10002, name=Ravi, passportNumber=A1234568]]
</code></pre></div></div>

<h2 id="implementing-mybatis-delete-insert-and-update-methods">Implementing myBatis delete, insert and update methods</h2>

<p>The code below shows the delete, insert and update methods.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nd">@Delete</span><span class="o">(</span><span class="s">"DELETE FROM student WHERE id = #{id}"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">deleteById</span><span class="o">(</span><span class="kt">long</span> <span class="n">id</span><span class="o">);</span>

	<span class="nd">@Insert</span><span class="o">(</span><span class="s">"INSERT INTO student(id, name, passport) VALUES (#{id}, #{name}, #{passport})"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">insert</span><span class="o">(</span><span class="nc">Student</span> <span class="n">student</span><span class="o">);</span>

	<span class="nd">@Update</span><span class="o">(</span><span class="s">"Update student set name=#{name}, passport=#{passport} where id=#{id}"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">update</span><span class="o">(</span><span class="nc">Student</span> <span class="n">student</span><span class="o">);</span>


</code></pre></div></div>

<p>Notes</p>
<ul>
  <li>These methods are relatively straight forward.</li>
  <li>All methods use the appropriate annotation with the query and highlight the necessary parameters.</li>
</ul>

<p>We can add a call to all the above methods in the run method of <code class="highlighter-rouge">SpringBoot2MyBatisWithH2Application.java</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Inserting -&gt; {}"</span><span class="o">,</span> <span class="n">repository</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="k">new</span> <span class="nc">Student</span><span class="o">(</span><span class="mi">10010L</span><span class="o">,</span> <span class="s">"John"</span><span class="o">,</span> <span class="s">"A1234657"</span><span class="o">)));</span>

<span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Update 10001 -&gt; {}"</span><span class="o">,</span> <span class="n">repository</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="k">new</span> <span class="nc">Student</span><span class="o">(</span><span class="mi">10001L</span><span class="o">,</span> <span class="s">"Name-Updated"</span><span class="o">,</span> <span class="s">"New-Passport"</span><span class="o">)));</span>

<span class="n">repository</span><span class="o">.</span><span class="na">deleteById</span><span class="o">(</span><span class="mi">10002L</span><span class="o">);</span>

<span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"All users 2 -&gt; {}"</span><span class="o">,</span> <span class="n">repository</span><span class="o">.</span><span class="na">findAll</span><span class="o">());</span>

</code></pre></div></div>

<p>You can see following output in the log when the project reloads.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Inserting -&gt; 1
Update 10001 -&gt; 1
All users 2 -&gt; [Student [id=10001, name=Name-Updated, passportNumber=New-Passport], Student [id=10010, name=John, passportNumber=A1234657]]
</code></pre></div></div>
<blockquote>
  <p>Awesome ! You’ve implemented all the CRUD methods using iBatis and Spring Boot.</p>
</blockquote>

<h2 id="complete-code-example">Complete Code Example</h2>

<h3 id="pomxml">/pom.xml</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>

	<span class="nt">&lt;groupId&gt;</span>com.girishgodage.springboot.rest.example<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId&gt;</span>spring-boot-2-myBatis-with-h2<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
	<span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>

	<span class="nt">&lt;name&gt;</span>spring-boot-2-myBatis-with-h2<span class="nt">&lt;/name&gt;</span>
	<span class="nt">&lt;description&gt;</span>Spring Boot 2, myBatis and H2 - Example Project<span class="nt">&lt;/description&gt;</span>

	<span class="nt">&lt;parent&gt;</span>
		<span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
		<span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="nt">&lt;/artifactId&gt;</span>
		<span class="nt">&lt;version&gt;</span>2.0.0.RELEASE<span class="nt">&lt;/version&gt;</span>
		<span class="nt">&lt;relativePath/&gt;</span> <span class="c">&lt;!-- lookup parent from repository --&gt;</span>
	<span class="nt">&lt;/parent&gt;</span>

	<span class="nt">&lt;properties&gt;</span>
		<span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
		<span class="nt">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.reporting.outputEncoding&gt;</span>
		<span class="nt">&lt;java.version&gt;</span>1.8<span class="nt">&lt;/java.version&gt;</span>
	<span class="nt">&lt;/properties&gt;</span>

	<span class="nt">&lt;dependencies&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>org.mybatis.spring.boot<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>mybatis-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;version&gt;</span>1.2.1<span class="nt">&lt;/version&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>

		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>spring-boot-devtools<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>com.h2database<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>h2<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>
	<span class="nt">&lt;/dependencies&gt;</span>

	<span class="nt">&lt;build&gt;</span>
		<span class="nt">&lt;plugins&gt;</span>
			<span class="nt">&lt;plugin&gt;</span>
				<span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
				<span class="nt">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;/plugin&gt;</span>
		<span class="nt">&lt;/plugins&gt;</span>
	<span class="nt">&lt;/build&gt;</span>

	<span class="nt">&lt;repositories&gt;</span>
		<span class="nt">&lt;repository&gt;</span>
			<span class="nt">&lt;id&gt;</span>spring-snapshots<span class="nt">&lt;/id&gt;</span>
			<span class="nt">&lt;name&gt;</span>Spring Snapshots<span class="nt">&lt;/name&gt;</span>
			<span class="nt">&lt;url&gt;</span>https://repo.spring.io/snapshot<span class="nt">&lt;/url&gt;</span>
			<span class="nt">&lt;snapshots&gt;</span>
				<span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
			<span class="nt">&lt;/snapshots&gt;</span>
		<span class="nt">&lt;/repository&gt;</span>
		<span class="nt">&lt;repository&gt;</span>
			<span class="nt">&lt;id&gt;</span>spring-milestones<span class="nt">&lt;/id&gt;</span>
			<span class="nt">&lt;name&gt;</span>Spring Milestones<span class="nt">&lt;/name&gt;</span>
			<span class="nt">&lt;url&gt;</span>https://repo.spring.io/milestone<span class="nt">&lt;/url&gt;</span>
			<span class="nt">&lt;snapshots&gt;</span>
				<span class="nt">&lt;enabled&gt;</span>false<span class="nt">&lt;/enabled&gt;</span>
			<span class="nt">&lt;/snapshots&gt;</span>
		<span class="nt">&lt;/repository&gt;</span>
	<span class="nt">&lt;/repositories&gt;</span>

	<span class="nt">&lt;pluginRepositories&gt;</span>
		<span class="nt">&lt;pluginRepository&gt;</span>
			<span class="nt">&lt;id&gt;</span>spring-snapshots<span class="nt">&lt;/id&gt;</span>
			<span class="nt">&lt;name&gt;</span>Spring Snapshots<span class="nt">&lt;/name&gt;</span>
			<span class="nt">&lt;url&gt;</span>https://repo.spring.io/snapshot<span class="nt">&lt;/url&gt;</span>
			<span class="nt">&lt;snapshots&gt;</span>
				<span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
			<span class="nt">&lt;/snapshots&gt;</span>
		<span class="nt">&lt;/pluginRepository&gt;</span>
		<span class="nt">&lt;pluginRepository&gt;</span>
			<span class="nt">&lt;id&gt;</span>spring-milestones<span class="nt">&lt;/id&gt;</span>
			<span class="nt">&lt;name&gt;</span>Spring Milestones<span class="nt">&lt;/name&gt;</span>
			<span class="nt">&lt;url&gt;</span>https://repo.spring.io/milestone<span class="nt">&lt;/url&gt;</span>
			<span class="nt">&lt;snapshots&gt;</span>
				<span class="nt">&lt;enabled&gt;</span>false<span class="nt">&lt;/enabled&gt;</span>
			<span class="nt">&lt;/snapshots&gt;</span>
		<span class="nt">&lt;/pluginRepository&gt;</span>
	<span class="nt">&lt;/pluginRepositories&gt;</span>


<span class="nt">&lt;/project&gt;</span>
</code></pre></div></div>
<hr />

<h3 id="srcmainjavacomgirishgodagespringbootmybatish2examplespringboot2mybatiswithh2applicationjava">/src/main/java/com/girishgodage/springboot/mybatis/h2/example/SpringBoot2MyBatisWithH2Application.java</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">girishgodage</span><span class="o">.</span><span class="na">springboot</span><span class="o">.</span><span class="na">mybatis</span><span class="o">.</span><span class="na">h2</span><span class="o">.</span><span class="na">example</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.slf4j.Logger</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.LoggerFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.CommandLineRunner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.SpringApplication</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.girishgodage.springboot.mybatis.h2.example.student.Student</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.girishgodage.springboot.mybatis.h2.example.student.StudentMyBatisRepository</span><span class="o">;</span>

<span class="nd">@SpringBootApplication</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringBoot2MyBatisWithH2Application</span> <span class="kd">implements</span> <span class="nc">CommandLineRunner</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="nc">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="nc">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>

	<span class="nd">@Autowired</span>
	<span class="nc">StudentMyBatisRepository</span> <span class="n">repository</span><span class="o">;</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="nc">SpringBoot2MyBatisWithH2Application</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="nc">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>

		<span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Student id 10001 -&gt; {}"</span><span class="o">,</span> <span class="n">repository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="mi">10001L</span><span class="o">));</span>

		<span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"All users 1 -&gt; {}"</span><span class="o">,</span> <span class="n">repository</span><span class="o">.</span><span class="na">findAll</span><span class="o">());</span>
		
		<span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Inserting -&gt; {}"</span><span class="o">,</span> <span class="n">repository</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="k">new</span> <span class="nc">Student</span><span class="o">(</span><span class="mi">10010L</span><span class="o">,</span> <span class="s">"John"</span><span class="o">,</span> <span class="s">"A1234657"</span><span class="o">)));</span>

		<span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Update 10001 -&gt; {}"</span><span class="o">,</span> <span class="n">repository</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="k">new</span> <span class="nc">Student</span><span class="o">(</span><span class="mi">10001L</span><span class="o">,</span> <span class="s">"Name-Updated"</span><span class="o">,</span> <span class="s">"New-Passport"</span><span class="o">)));</span>

		<span class="n">repository</span><span class="o">.</span><span class="na">deleteById</span><span class="o">(</span><span class="mi">10002L</span><span class="o">);</span>
		
		<span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"All users 2 -&gt; {}"</span><span class="o">,</span> <span class="n">repository</span><span class="o">.</span><span class="na">findAll</span><span class="o">());</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<hr />

<h3 id="srcmainjavacomgirishgodagespringbootmybatish2examplestudentstudentjava">/src/main/java/com/girishgodage/springboot/mybatis/h2/example/student/Student.java</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">girishgodage</span><span class="o">.</span><span class="na">springboot</span><span class="o">.</span><span class="na">mybatis</span><span class="o">.</span><span class="na">h2</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">student</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Student</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">passport</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">Student</span><span class="o">()</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nf">Student</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">,</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">passport</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
		<span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">passport</span> <span class="o">=</span> <span class="n">passport</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nf">Student</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">String</span> <span class="n">passport</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">();</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">passport</span> <span class="o">=</span> <span class="n">passport</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nc">Long</span> <span class="nf">getId</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">id</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setId</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPassport</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">passport</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPassport</span><span class="o">(</span><span class="nc">String</span> <span class="n">passport</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">passport</span> <span class="o">=</span> <span class="n">passport</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"Student [id=%s, name=%s, passport=%s]"</span><span class="o">,</span> <span class="n">id</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">passport</span><span class="o">);</span>
	<span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>
<hr />

<h3 id="srcmainjavacomgirishgodagespringbootmybatish2examplestudentstudentmybatisrepositoryjava">/src/main/java/com/girishgodage/springboot/mybatis/h2/example/student/StudentMyBatisRepository.java</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">girishgodage</span><span class="o">.</span><span class="na">springboot</span><span class="o">.</span><span class="na">mybatis</span><span class="o">.</span><span class="na">h2</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">student</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Delete</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Insert</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Select</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Update</span><span class="o">;</span>

<span class="nd">@Mapper</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">StudentMyBatisRepository</span> <span class="o">{</span>
	<span class="nd">@Select</span><span class="o">(</span><span class="s">"select * from student"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">();</span>

	<span class="nd">@Select</span><span class="o">(</span><span class="s">"SELECT * FROM student WHERE id = #{id}"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">Student</span> <span class="nf">findById</span><span class="o">(</span><span class="kt">long</span> <span class="n">id</span><span class="o">);</span>

	<span class="nd">@Delete</span><span class="o">(</span><span class="s">"DELETE FROM student WHERE id = #{id}"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">deleteById</span><span class="o">(</span><span class="kt">long</span> <span class="n">id</span><span class="o">);</span>

	<span class="nd">@Insert</span><span class="o">(</span><span class="s">"INSERT INTO student(id, name, passport) VALUES (#{id}, #{name}, #{passport})"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">insert</span><span class="o">(</span><span class="nc">Student</span> <span class="n">student</span><span class="o">);</span>

	<span class="nd">@Update</span><span class="o">(</span><span class="s">"Update student set name=#{name}, passport=#{passport} where id=#{id}"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">update</span><span class="o">(</span><span class="nc">Student</span> <span class="n">student</span><span class="o">);</span>

<span class="o">}</span>
</code></pre></div></div>
<hr />

<h3 id="srcmainresourcesapplicationproperties">/src/main/resources/application.properties</h3>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Enabling H2 Console
</span><span class="py">spring.h2.console.enabled</span><span class="p">=</span><span class="s">true</span>
<span class="c">#Turn Statistics on
</span><span class="py">spring.jpa.properties.hibernate.generate_statistics</span><span class="p">=</span><span class="s">true</span>
<span class="py">logging.level.org.hibernate.stat</span><span class="p">=</span><span class="s">debug</span>
<span class="c"># Show all queries
</span><span class="py">spring.jpa.show-sql</span><span class="p">=</span><span class="s">true</span>
<span class="py">spring.jpa.properties.hibernate.format_sql</span><span class="p">=</span><span class="s">true</span>
<span class="py">logging.level.org.hibernate.type</span><span class="p">=</span><span class="s">trace</span>
</code></pre></div></div>
<hr />

<h3 id="srcmainresourcesdatasql">/src/main/resources/data.sql</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>insert into student
values(10001,'Ranga', 'E1234567');

insert into student
values(10002,'Ravi', 'A1234568');
</code></pre></div></div>
<hr />

<h3 id="srcmainresourcesschemasql">/src/main/resources/schema.sql</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>create table student
(
   id integer not null,
   name varchar(255) not null,
   passport varchar(255) not null,
   primary key(id)
);
</code></pre></div></div>
<hr />

<h3 id="srctestjavacomgirishgodagespringbootmybatish2examplespringboot2mybatiswithh2applicationtestsjava">/src/test/java/com/girishgodage/springboot/mybatis/h2/example/SpringBoot2MyBatisWithH2ApplicationTests.java</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">girishgodage</span><span class="o">.</span><span class="na">springboot</span><span class="o">.</span><span class="na">mybatis</span><span class="o">.</span><span class="na">h2</span><span class="o">.</span><span class="na">example</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.runner.RunWith</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.test.context.junit4.SpringRunner</span><span class="o">;</span>

<span class="nd">@RunWith</span><span class="o">(</span><span class="nc">SpringRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@SpringBootTest</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringBoot2MyBatisWithH2ApplicationTests</span> <span class="o">{</span>

	<span class="nd">@Test</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">contextLoads</span><span class="o">()</span> <span class="o">{</span>
	<span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>
<hr />

<hr />

<!--Section: Lesson UI-->
<section class="text-center">
    <hr />
   
    <div class="row">
        <div class="col-lg-4 col-md-6 col-sm-6">
            <a target="_blank" href="/blog/hibernate-jpa-tutorial-with-spring-boot-starter-jpa" class="btn  btn-sm" id="round-button">
                <i class="fas fa-arrow-left mr-2"></i>Previous Lesson
            </a>
        </div>
     
        <div class="col-lg-4 col-md-6 col-sm-6">
            <a target="_blank" href="/blog/spring-boot-and-h2-in-memory-database" class="btn btn-sm" id="round-button">Next Lesson
                <i class="fas fa-arrow-right ml-2"></i>
            </a>
        </div>       
    </div>

</section>


                </div>

                

                <div id="disqus_thread"></div>
                <script>
                
                /**
                *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
                /*
                var disqus_config = function () {
                this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                };
                */
                (function() { // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');
                s.src = 'https://girishgodage-github-io.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



            </div>
        </div>
    </div>
    <!-- Go To Top-->
<button onclick="topFunction()"
id="myBtn"
title="Go to top"> <i class="fa fa-chevron-up"  style="font-size:36px"></i>
</button>
<!-- Footer-->
<footer class="main-footer">
    <div class="container">
        <div class="row">
            <div class="col-12 col-md-6 text-center text-lg-left">
                <p class="social">
                    <a href="https://www.facebook.com/girish.godage.5" class="external facebook wow fadeInUp">
                        <i class="fa fa-facebook"></i></a>
                    <a href="https://instagram.com/girishgodage_007" data-wow-delay="0.2s" class="external instagram wow fadeInUp">
                        <i class="fa fa-instagram"></i></a>
                    <a href="https://youtube.com/girishgodage" data-wow-delay="0.4s" class="external youtube wow fadeInUp">
                        <i class="fa fa-youtube-play"></i></a>
                    <a href="https://twitter.com/GGodage" data-wow-delay="0.4s" class="external twitter wow fadeInUp">
                            <i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/girishgodage" data-wow-delay="0.4s" class="external github wow fadeInUp">
                                <i class="fa fa-github"></i></a>    
                    <a href="mailto:girishgodage@gmail.com?subject=Hello%20Girish" data-wow-delay="0.6s" class="email wow fadeInUp">
                        <i class="fa fa-envelope"></i></a></p>
            </div>
            <div class="col-12 col-md-2">
            <h5>Quick Links</h5>
            <ul>
               <li><a href="http://localhost:4000#about">About</a></li>
               <li><a href="http://localhost:4000#contact">Contact</a></li>
               <li><a href="/sitemap.xml">Sitemap</a></li>               
            </ul>
         </div>
            <div class="col-12 col-md-4 text-center text-lg-right mt-4 mt-lg-0">
                <p> <b>©</b>2019 Girish Godage </p>
                <p class="text-center, text-shadow"> Hosted On <a href="https://pages.github.com/">GitHub Pages</a></p>
            </div>
        </div>
    </div>
</footer>
    <!-- Typed.js DONT TOUCH THIS! -->
    <div id="typed-strings">
    </div>

        <!-- JavaScript files-->
    <script src="http://localhost:4000/sitejs/jquery/jquery.min.js"></script>
    <script src="http://localhost:4000/sitejs/popper.js/umd/popper.min.js"> </script>
    <script src="http://localhost:4000/sitejs/bootstrap/js/bootstrap.min.js"></script>
    <script src="http://localhost:4000/sitejs/jquery.cookie/jquery.cookie.js"> </script>
    <script src="http://localhost:4000/sitejs/owl.carousel/owl.carousel.min.js"></script>
    <script src="http://localhost:4000/sitejs/waypoints/lib/jquery.waypoints.min.js"></script>
    <script src="http://localhost:4000/sitejs/jquery.counterup/jquery.counterup.js"></script>
    <script src="http://localhost:4000/js/front.js"></script>
    <script src="http://localhost:4000/js/comment.js"></script>
       <!-- Script pointing to search-script.js -->
    <script src="http://localhost:4000/js/search-script.js" type="text/javascript"></script>
   
    <!-- Configuration -->
    <script>
         SimpleJekyllSearch({
         searchInput: document.getElementById('search-input'),
         resultsContainer: document.getElementById('results-container'),
         json: '/search.json'
         })
         </script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.2.0/firebase.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.2.0/firebase-analytics.js"></script>

<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyC36FUDDdOTidZJ8nzS5vfE7KVyayenKPE",
    authDomain: "githubcontactlist.firebaseapp.com",
    databaseURL: "https://githubcontactlist.firebaseio.com",
    projectId: "githubcontactlist",
    storageBucket: "githubcontactlist.appspot.com",
    messagingSenderId: "899685398702",
    appId: "1:899685398702:web:0c23c56d2d6d40df37553f",
    measurementId: "G-YWBRCYJYFW"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
</script>
<script>
   $(function() {
      
    //make a variable to keep track of data coming from firebase
    var data = [];

    // Reference messages collection
      var messagesRef = firebase.database().ref('contactformmessages');  


    //listen to data updates from firebase
    messagesRef.on("value", function(snapshot) {
        console.log(snapshot.val());
        //when the data updates at firebase, put it in the data variable
        data = snapshot.val();
    })
    //Entire Contact Form (handler)
    $('#contactForm').submit(function(e) {
      e.preventDefault();

        var $form = $(this);
        console.log("Submit to Firebase");

        //disable submit button
        $form.find("#sendForm").prop('disabled', true);

        //get values to send to Firebase
        var name = $('#name').val();
        console.log(name);
		
		var surname = $('#surname').val();
        console.log(surname);
		
		var email = $('#email').val();
        console.log(email);	
		
		var phone = $('#phone').val();
        console.log(phone);

        var message = $('#message').val();
        console.log(message);

       
        //take the values from the form, and put them in an object
        var newContact = {
         "name": name,
			"surname": surname,
			"email": email,
			"phone": phone,
         "message": message
        }
        //put new object in data array
        data.push(newContact);
        console.log(data);

        //send the new data to Firebase
        messagesRef.set(data, function(err) {
            if (err) {
                alert("Data no go");
            }else{
            $("#form-wrapper").slideToggle();
            $('#form-success-message').slideToggle();
			}
        });

        return false;
    })
   
    
})
</script>

<script>

    function disableScrolling() {
        let x = window.scrollX;
        let y = window.scrollY;
        window.onscroll = function () { window.scrollTo(x, y); };
    }

    function enableScrolling() {
        window.onscroll = function () { };
    }

    // Add copy button
    let pres = document.getElementsByTagName('pre');
    Array.from(pres).forEach((element2) => {
        let element = document.createElement('button');
        element.setAttribute('class', 'btn btn-primary');
        element.innerHTML = 'Copy';
        element.style.float = 'right';

        element.addEventListener('click', (e) => {
            disableScrolling();
            console.log(e)
            let x = window.screenX;
            let y = window.screenY;

            element.innerHTML = 'copied';
            let tarea = document.createElement('textarea');
            tarea.innerHTML = element.parentElement.children[1].innerText;
            document.body.append(tarea);
            tarea.focus();
            tarea.select();
            document.execCommand('copy');
            tarea.style.display = 'none';
            setTimeout(() => {
                element.innerHTML = 'Copy';
            }, 2000);
            setTimeout(() => {
                enableScrolling();
            }, 0);
        })
        element2.insertBefore(element, element2.children[0]);
    })

    //Get the button
    myBtton = document.getElementById("myBtn");
    window.onscroll=function()
    {
        scrollFunction();
    }
    function scrollFunction(){
        if (document.body.scrollTop > 20 ||
        document.documentElement.scrollTop >20)
        {
            myBtton.style.display="block";           
        }else
        {
           myBtton.style.display="none";     
          
        }
    }
    //When user click on the top button
    function topFunction(){
      //  document.body.scrollTop =0;
      //  document.documentElement.scrollTop=0;
        $("html, body").animate({
            scrollTop: 0
        }, 600);
        return false;
    }

</script>

    
    


</body>

</html>