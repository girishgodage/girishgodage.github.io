<!DOCTYPE html>
<html lang="en">

<head>
     
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#2A80EE">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#2A80EE">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#2A80EE">
<title>Build the back-end API with basic EF model &#8211; Girish Godage</title>
<meta name="description" content="In this tutorial, you'll learn to build up to an API back-end application, using .NET  Core Web Application for our ConferencePlanner application.">
<meta name="keywords" content="Asp.net core">

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all">

<!-- Verifications -->
    
    
        
<!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Build the back-end API with basic EF model">
    <meta property="og:description" content="I am a passionate Leader, who has a good command in technology &amp; Mangement. Also, I am a creative designer and an innovatie techie.">
    <meta property="og:url" content="http://localhost:4000/blog/CreateBackEndAPIproject">
    <meta property="og:site_name" content="Girish Godage">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    
        <meta name="twitter:site" content="@GGodage" />
    
    <meta name="twitter:title" content="Build the back-end API with basic EF model" />
    <meta name="twitter:description" content="In this tutorial, you'll learn to build up to an API back-end application, using .NET  Core Web Application for our ConferencePlanner application." />
    <meta name="twitter:url" content="http://localhost:4000/blog/CreateBackEndAPIproject" />

    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/img/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/img/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/img/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/img/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/img/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/img/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/img/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
    


    <link rel="canonical" href="http://localhost:4000/blog/CreateBackEndAPIproject">
<link rel="alternate" type="application/rss+xml" title="RSS Feed for Girish Godage" href="/feed.xml" />
    <!-- Bootstrap CSS-->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <!-- Google fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Advent+Pro">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Varela+Round">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abel">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
   
    <!-- owl carousel-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.carousel.css" >
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.theme.css">
    
    <!-- animate.css-->
    <link rel="stylesheet" href="http://localhost:4000/sitejs/animate.css/animate.css">
    <!-- theme stylesheet-->
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="http://localhost:4000/css/custom.css" as="style">
    <link rel="stylesheet" href="http://localhost:4000/css/comments.css" as="style">
    <!-- Favicon-->
    <link rel="shortcut icon" href="http://localhost:4000/img/logo-big.png">
    <!-- Fab Icon-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-mfizz/2.4.1/font-mfizz.min.css">
    
    

    <!-- Global site tag (gtag.js) - Google Analytics -->
    
    <script type="text/javascript">
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
       ga('create', 'UA-130164763-2', 'auto');
       ga('send', 'pageview');
    </script>
    
    <!-- Typed.js DONT TOUCHHHHHHHHHHHHH!-->
    <!--<script src="https://cdn.rawgit.com/mattboldt/typed.js/master/lib/typed.min.js"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.9/typed.min.js"></script>
    <script>
        function copyToClipboard(element) {
            var $temp = $("<input>");
            $("body").append($temp);
            $temp.val($(element).text()).select();
            document.execCommand("copy");
            $temp.remove();
        }
      </script>
      
      <!-- START OF RELEVANT PART -->
    <script async src="https://just-comments.com/w2.js"></script>
    <!-- END OF RELEVANT PART -->


</head>

<body>
    
<!-- navbar-->
<header class="header">
  <nav class="navbar navbar-expand-lg fixed-top">
    <div class="container"><a class="navbar-brand" href="http://localhost:4000"><img
          src="http://localhost:4000/img/logo-big.png" width="50" height="50" class="d-inline-block align-center"
          alt="logo"> <img src="http://localhost:4000/img/girish_logo.png" height="30" alt="girilogo"></a>
      <button type="button" data-toggle="collapse" data-target="#navbarcollapse" aria-controls="navbarSupportedContent"
        aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler navbar-toggler-right"><span
          class="fa fa-bars" style="color: white"></span></button>
      <div id="navbarcollapse" class="collapse navbar-collapse">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item"><a href="http://localhost:4000#home" class="nav-link  link-scroll">Home</a></li>
          <li class="nav-item"><a href="http://localhost:4000#about" class="nav-link link-scroll">About</a></li>
          <li class="nav-item"><a href="http://localhost:4000#skills" class="nav-link link-scroll">Skills</a>
          </li>
          <li class="nav-item"><a href="http://localhost:4000#services" class="nav-link link-scroll">Services</a>
          </li>
          <li class="nav-item"><a href="http://localhost:4000#references" class="nav-link link-scroll">My
              work</a></li>
          <li class="nav-item"><a href="http://localhost:4000#contact" class="nav-link link-scroll">Contact</a>
          </li>
          <li class="nav-item"><a href="http://localhost:4000/blog" class="nav-link link-scroll">Blog</a></li>
        </ul>
      </div>
    </div>
  </nav>
</header>

    
    
    
    <div style="background-color:Gray;">
        <div style="padding:0;min-height:95.05vh;display:flex;font-family: Poppins, sans-serif;margin-top: 5rem;"
            class="container">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <p class="post-title">
                    <h1><a href="/blog/CreateBackEndAPIproject">Build the back-end API with basic EF model</a></h1>
                </p>
                
                <span class="post-meta">
              <span style="font-weight:600">October 24, 2019 Thursday</span>
                    
                       ( 6 minute read ) 
                    
                     
                    <a style="font-weight:600" href="https://twitter.com/girishgodage_007" target="_blank">   by Girish Godage</a>
                </span>
                
                <div class="site-category"> 
                        <h5>Asp.net core</h5>
                </div>
                
                <hr>
                <div><img class="post-image" src="/img/aspnetcore.png" alt="Build the back-end API with basic EF model" height="250" /></div>
                <div class="post-content">
                    <br>                     
                    <h2 id="creating-a-new-project-using-visual-studio">Creating a new project using Visual Studio</h2>
<ol>
  <li>Create and add a new project named <code class="highlighter-rouge">BackEnd</code> and name the solution <code class="highlighter-rouge">ConferencePlanner</code> using File / New / ASP.NET Core Web Application. Select the Web API template, No Auth, no Docker support.
    <h5 id="open-a-visual-studio">Open a Visual Studio</h5>
    <p><img src="/img/aspdotnetcore/confplanner/2/2.png" alt="" title="Open a Visual Studio" /></p>

    <h5 id="creating-a-new-solution-in-visual-studio">Creating a new solution in Visual Studio</h5>
    <p><img src="/img/aspdotnetcore/confplanner/2/2.png" alt="" title="Creating a new solution in Visual Studio" /></p>

    <h5 id="adding-a-project-to-the-solution">Adding a project to the solution</h5>
    <p><img src="/img/aspdotnetcore/confplanner/2/3.png" alt="" title="Adding a project to the solution" /></p>

    <h5 id="web-api-project-settings">Web API Project settings</h5>
    <p><img src="/img/aspdotnetcore/confplanner/2/4.png" alt="" title="Web API Project settings" /></p>

    <blockquote>
      <p><strong><em>Note:</em> If not using Visual Studio, create the project using <code class="highlighter-rouge">dotnet new webapi</code> at the cmd line, details as follows:</strong></p>
      <ol>
        <li>Create folder ConferencePlanner and call <code class="highlighter-rouge">dotnet new sln</code> at the cmd line to create a solution</li>
        <li>Create sub-folder BackEnd and create a project using <code class="highlighter-rouge">dotnet new webapi</code> at the cmd line inside the folder BackEnd</li>
        <li>Add the project to the solution using <code class="highlighter-rouge">dotnet sln add BackEnd/BackEnd.csproj</code></li>
      </ol>
    </blockquote>
  </li>
  <li>Add a new <code class="highlighter-rouge">Models</code> folder to the root of the application.</li>
  <li>Add a new <code class="highlighter-rouge">Speaker</code> class using the following code:
    <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
 <span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
 <span class="k">using</span> <span class="nn">System.ComponentModel.DataAnnotations</span><span class="p">;</span>
 <span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
 <span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>

 <span class="k">namespace</span> <span class="nn">BackEnd.Models</span>
 <span class="p">{</span>
     <span class="k">public</span> <span class="k">class</span> <span class="nc">Speaker</span>
     <span class="p">{</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">Id</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="p">[</span><span class="n">Required</span><span class="p">]</span>
        <span class="p">[</span><span class="nf">StringLength</span><span class="p">(</span><span class="m">200</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="p">[</span><span class="nf">StringLength</span><span class="p">(</span><span class="m">4000</span><span class="p">)]</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">Bio</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="p">[</span><span class="nf">StringLength</span><span class="p">(</span><span class="m">1000</span><span class="p">)]</span>
        <span class="k">public</span> <span class="k">virtual</span> <span class="kt">string</span> <span class="n">WebSite</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
     <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div>    </div>
    <h5 id="project-structure">Project Structure</h5>
    <p><img src="/img/aspdotnetcore/confplanner/2/5.png" alt="" title="Project Structure" /></p>
  </li>
  <li>
    <p>Add a reference to the NuGet package <code class="highlighter-rouge">Microsoft.EntityFrameworkCore.SqlServer</code> version <code class="highlighter-rouge">3.0.0</code>.
 <img src="/img/aspdotnetcore/confplanner/2/6.png" alt="" title="Add a reference to the NuGet package" /></p>

    <blockquote>
      <p>This can be done from the command line using <code class="highlighter-rouge">dotnet add package Microsoft.EntityFrameworkCore.SqlServer --version 3.0.0</code></p>
    </blockquote>
  </li>
  <li>
    <p>Add a reference to the NuGet package <code class="highlighter-rouge">Microsoft.EntityFrameworkCore.Sqlite</code> version <code class="highlighter-rouge">3.0.0</code>.
 <img src="/img/aspdotnetcore/confplanner/2/7.png" alt="" title="Add a reference to the NuGet package" /></p>

    <blockquote>
      <p>This can be done from the command line using <code class="highlighter-rouge">dotnet add package Microsoft.EntityFrameworkCore.Sqlite --version 3.0.0</code></p>
    </blockquote>
  </li>
  <li>Next we’ll create a new Entity Framework DbContext. Create a new <code class="highlighter-rouge">ApplicationDbContext</code> class in the <code class="highlighter-rouge">Models</code> folder using the following code:
    <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">using</span> <span class="nn">Microsoft.EntityFrameworkCore</span><span class="p">;</span>

 <span class="k">namespace</span> <span class="nn">BackEnd.Models</span>
 <span class="p">{</span>
     <span class="k">public</span> <span class="k">class</span> <span class="nc">ApplicationDbContext</span> <span class="p">:</span> <span class="n">DbContext</span>
     <span class="p">{</span>
         <span class="k">public</span> <span class="nf">ApplicationDbContext</span><span class="p">(</span><span class="n">DbContextOptions</span><span class="p">&lt;</span><span class="n">ApplicationDbContext</span><span class="p">&gt;</span> <span class="n">options</span><span class="p">)</span>
             <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
         <span class="p">{</span>

         <span class="p">}</span>

         <span class="k">public</span> <span class="n">DbSet</span><span class="p">&lt;</span><span class="n">Speaker</span><span class="p">&gt;</span> <span class="n">Speakers</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
     <span class="p">}</span>
 <span class="p">}</span>

</code></pre></div>    </div>
    <p><img src="/img/aspdotnetcore/confplanner/2/8.png" alt="" title="Create a new `ApplicationDbContext`" /></p>
  </li>
  <li>
    <p>Add a connection string to the appsettings.json file for this database:</p>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"ConnectionStrings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"DefaultConnection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Server=(localdb)</span><span class="se">\\</span><span class="s2">mssqllocaldb;Database=aspnet-BackEnd-931E56BD-86CB-4A96-BD99-2C6A6ABB0829;Trusted_Connection=True;MultipleActiveResultSets=true"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"Logging"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"LogLevel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Warning"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Microsoft"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Warning"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Microsoft.Hosting.Lifetime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Information"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"AllowedHosts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
    <p><img src="/img/aspdotnetcore/confplanner/2/9.png" alt="" title="Add a connection string to the appsettings.json" /></p>
    <h2 id="register-the-db-context-service">Register the DB Context Service</h2>
  </li>
  <li>Add the following code to the top of the <code class="highlighter-rouge">ConfigureServices()</code> method in <code class="highlighter-rouge">Startup.cs</code>:
    <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">services</span><span class="p">.</span><span class="n">AddDbContext</span><span class="p">&lt;</span><span class="n">ApplicationDbContext</span><span class="p">&gt;(</span><span class="n">options</span> <span class="p">=&gt;</span>
 <span class="p">{</span>
     <span class="k">if</span> <span class="p">(</span><span class="n">RuntimeInformation</span><span class="p">.</span><span class="nf">IsOSPlatform</span><span class="p">(</span><span class="n">OSPlatform</span><span class="p">.</span><span class="n">Windows</span><span class="p">))</span>
     <span class="p">{</span>
         <span class="n">options</span><span class="p">.</span><span class="nf">UseSqlServer</span><span class="p">(</span><span class="n">Configuration</span><span class="p">.</span><span class="nf">GetConnectionString</span><span class="p">(</span><span class="s">"DefaultConnection"</span><span class="p">));</span>
     <span class="p">}</span>
     <span class="k">else</span>
     <span class="p">{</span>
         <span class="n">options</span><span class="p">.</span><span class="nf">UseSqlite</span><span class="p">(</span><span class="s">"Data Source=conferences.db"</span><span class="p">);</span>
     <span class="p">}</span>
 <span class="p">});</span>
</code></pre></div>    </div>
    <p><img src="/img/aspdotnetcore/confplanner/2/10.png" alt="" title="Register the DB Context Service" /></p>

    <blockquote>
      <p>This code registers the <code class="highlighter-rouge">ApplicationDbContext</code> service so it can be injected into controllers. Additionally, it configures operating system specific database technologies and connection strings</p>
    </blockquote>
  </li>
</ol>

<h2 id="configuring-ef-migrations">Configuring EF Migrations</h2>

<ol>
  <li>Add a reference to the NuGet package <code class="highlighter-rouge">Microsoft.EntityFrameworkCore.Tools</code> version <code class="highlighter-rouge">3.0.0</code>.
 <img src="/img/aspdotnetcore/confplanner/2/11.png" alt="" title="Add a reference to the NuGet package" />
    <blockquote>
      <p><strong>If you’re not using Visual Studio</strong> install the package from the command line with <code class="highlighter-rouge">dotnet add package Microsoft.EntityFrameworkCore.Tools --version 3.0.0</code></p>
    </blockquote>
  </li>
</ol>

<h3 id="visual-studio-package-manager-console">Visual Studio: Package Manager Console</h3>

<ol>
  <li>In Visual Studio, select the Tools -&gt; NuGet Package Manager -&gt; Package Manager Console</li>
</ol>

<p><img src="/img/aspdotnetcore/confplanner/2/12.png" alt="" title=" Package Manager Console" /></p>

<ol>
  <li>Run the following commands in the Package Manager Console
    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Add-Migration Initial
Update-Database
</span></code></pre></div>    </div>
    <p><img src="/img/aspdotnetcore/confplanner/2/14.png" alt="" title=" Package Manager Console 1" /></p>
    <h3 id="command-line">Command line</h3>
  </li>
  <li>Install the EntityFramework global tool <code class="highlighter-rouge">dotnet-ef</code> using the following command:
    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">dotnet tool install -g dotnet-ef --version 3.0.0
</span></code></pre></div>    </div>
  </li>
  <li>
    <p>Open a command prompt and navigate to the project directory. (The directory containing the <code class="highlighter-rouge">Startup.cs</code> file).</p>
  </li>
  <li>Run the following commands in the command prompt:
    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go"> dotnet build
 dotnet ef migrations add Initial
 dotnet ef database update
</span></code></pre></div>    </div>
    <p>Commands Explained</p>
  </li>
</ol>

<table>
  <thead>
    <tr>
      <th>Command</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">dotnet ef migrations add Initial</code> / <code class="highlighter-rouge">Add-Migration Initial</code></td>
      <td>generates code to create the initial database schema based on the model specified in ‘ApplicationDbContext.cs’. <code class="highlighter-rouge">Initial</code> is the name of the migration.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">dotnet ef database update</code> / <code class="highlighter-rouge">Update-Database</code></td>
      <td>creates the database</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>For more information on these commands and scaffolding in general, see <a href="https://docs.microsoft.com/en-us/aspnet/core/tutorials/first-mvc-app/adding-model#add-initial-migration-and-update-the-database">this tutorial</a>.</p>
</blockquote>

<blockquote>
  <p>If your database ever gets in a bad state and you’d like to reset things, you can use <code class="highlighter-rouge">dotnet ef database drop</code> followed by <code class="highlighter-rouge">dotnet ef database update</code> to remove your database and run all migrations again.</p>
</blockquote>

<h2 id="a-quick-look-at-the-weather-forecast-controller">A quick look at the Weather Forecast Controller</h2>
<p>First, open the <code class="highlighter-rouge">Controllers</code> folder and take a quick look at the <code class="highlighter-rouge">WeatherForecastController</code>. You’ll see a simple function that corresponds to the HTTP GET verb. You’ll see the output of this controller in a bit, but first we’ll build our own API controller for the <code class="highlighter-rouge">Speakers</code> model class.</p>

<h2 id="scaffolding-an-api-controller">Scaffolding an API Controller</h2>

<h3 id="using-visual-studio">Using Visual Studio</h3>
<ol>
  <li>Right-click the <code class="highlighter-rouge">Controllers</code> folder and select Add/Controller. Select “API Controller with actions, using Entity Framework”.</li>
</ol>

<p><img src="/img/aspdotnetcore/confplanner/2/18.png" alt="" title=" API Controller" /></p>

<ol>
  <li>In the dialog, select the <code class="highlighter-rouge">Speaker</code> model for the Model Class, <code class="highlighter-rouge">ApplicationDbContext</code> for the “Data Context Class” and click the <code class="highlighter-rouge">Add</code> button.
<img src="/img/aspdotnetcore/confplanner/2/19.png" alt="" /></li>
</ol>

<h3 id="using-the-cmd-line">Using the cmd line</h3>
<ol>
  <li>Install the “Microsoft.VisualStudio.Web.CodeGeneration.Design” package
    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go"> dotnet add package Microsoft.VisualStudio.Web.CodeGeneration.Design --version 3.0.0
</span></code></pre></div>    </div>
  </li>
  <li>Install the <code class="highlighter-rouge">aspnet-codegenerator</code> global tool by running the following command:
    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go"> dotnet tool install -g dotnet-aspnet-codegenerator --version 3.0.0
</span></code></pre></div>    </div>
  </li>
</ol>

<blockquote>
  <p>Note: You will need to close and reopen the console window to be able to use this tool.</p>
  <ol>
    <li>Run the following in the project folder at the cmd line:
      <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go"> dotnet aspnet-codegenerator controller -api -name SpeakersController -m Speaker -dc BackEnd.Models.ApplicationDbContext -outDir Controllers
</span></code></pre></div>      </div>
    </li>
  </ol>
</blockquote>

<h2 id="testing-the-api-using-the-swashbuckle">Testing the API using the Swashbuckle</h2>

<p>In this section, we’ll be adding documentation to our API using the Swashbuckle NuGet package.</p>

<p><a href="https://github.com/domaindrivendev/swashbuckle.aspnetcore">Swashbuckle.AspNetCore</a> is an open source project for generating Swagger documents for Web APIs that are built with ASP.NET Core.</p>

<p><a href="https://swagger.io">Swagger</a> is a machine readable representation of a RESTful API that enables support for interactive documentation, client SDK generation and discoverability.</p>

<p>Additional information on using Swashbuckle in ASP.NET Core is available in this tutorial: <a href="https://docs.microsoft.com/en-us/aspnet/core/tutorials/web-api-help-pages-using-swagger">ASP.NET Web API Help Pages using Swagger</a></p>

<ol>
  <li>Add a reference to the NuGet package <code class="highlighter-rouge">Swashbuckle.AspNetCore</code> version <code class="highlighter-rouge">5.0.0-rc4</code>.
 <img src="/img/aspdotnetcore/confplanner/2/21.png" alt="" />
    <blockquote>
      <p>This can be done from the command line using <code class="highlighter-rouge">dotnet add package Swashbuckle.AspNetCore --version 5.0.0-rc4</code></p>
    </blockquote>
  </li>
  <li>Add the Swashbuckle services in your <code class="highlighter-rouge">ConfigureServices</code> method:
    <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">services</span><span class="p">.</span><span class="nf">AddControllers</span><span class="p">();</span>

 <span class="n">services</span><span class="p">.</span><span class="nf">AddSwaggerGen</span><span class="p">(</span><span class="n">options</span> <span class="p">=&gt;</span>
     <span class="n">options</span><span class="p">.</span><span class="nf">SwaggerDoc</span><span class="p">(</span><span class="s">"v1"</span><span class="p">,</span> <span class="k">new</span> <span class="n">OpenApiInfo</span> <span class="p">{</span> <span class="n">Title</span> <span class="p">=</span> <span class="s">"Conference Planner API"</span><span class="p">,</span> <span class="n">Version</span> <span class="p">=</span> <span class="s">"v1"</span> <span class="p">})</span>
 <span class="p">);</span>
</code></pre></div>    </div>
    <p><img src="/img/aspdotnetcore/confplanner/2/22.png" alt="" /></p>
  </li>
  <li>Configure Swashbuckle by adding the following lines just before <code class="highlighter-rouge">UseRouting</code> in the <code class="highlighter-rouge">Configure</code> method in <code class="highlighter-rouge">Startup.cs</code>:
    <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">app</span><span class="p">.</span><span class="nf">UseSwagger</span><span class="p">();</span>

 <span class="n">app</span><span class="p">.</span><span class="nf">UseSwaggerUI</span><span class="p">(</span><span class="n">options</span> <span class="p">=&gt;</span>
     <span class="n">options</span><span class="p">.</span><span class="nf">SwaggerEndpoint</span><span class="p">(</span><span class="s">"/swagger/v1/swagger.json"</span><span class="p">,</span> <span class="s">"Conference Planner API v1"</span><span class="p">)</span>
 <span class="p">);</span>
</code></pre></div>    </div>
    <p><img src="/img/aspdotnetcore/confplanner/2/23.png" alt="" /></p>
    <blockquote>
      <p><strong><em>Note:</em> Due to how the middleware and pipeline are structured, you’ll want to place this before the <code class="highlighter-rouge">app.UseEndpoints()</code> statement.</strong></p>
    </blockquote>
  </li>
  <li>Add a redirect to the end of the pipeline that redirects to the swagger end point.
    <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="n">context</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">context</span><span class="p">.</span><span class="n">Response</span><span class="p">.</span><span class="nf">Redirect</span><span class="p">(</span><span class="s">"/swagger"</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">Task</span><span class="p">.</span><span class="n">CompletedTask</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>    </div>
    <p><img src="/img/aspdotnetcore/confplanner/2/24.png" alt="" /></p>
  </li>
  <li>Run the application (F5 in Visual Studio or <code class="highlighter-rouge">dotnet run</code> from console).</li>
  <li>Browse to the Swagger UI at <code class="highlighter-rouge">http://localhost:&lt;random_port&gt;/swagger</code>.
 <img src="/img/aspdotnetcore/confplanner/2/25.png" alt="" /></li>
  <li>
    <p>First, click on the <em>GET</em> button in <em>WeatherForecast</em> section. You’ll see the values that were listed in the <code class="highlighter-rouge">WeatherForecastController</code> earlier.
  <img src="/img/aspdotnetcore/confplanner/2/26.png" alt="" /></p>
  </li>
  <li>In the <em>Speakers</em> section, click on the <em>GET</em> button. You’ll see there are not speakers returned. Let’s add one!</li>
  <li>In the <em>Speakers</em> section, click on the <em>POST</em> button. Referencing the example on the right, fill in a speaker request. Leave the <code class="highlighter-rouge">ID</code> blank, that will be filled in by the database.
 <img src="/img/aspdotnetcore/confplanner/2/27.png" alt="" />
    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Girish Godage"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"bio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Technical Leader"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"webSite"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://girishgodage.in"</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
    <p><img src="/img/aspdotnetcore/confplanner/2/28.png" alt="" /></p>
  </li>
  <li>When you click the <em>Try it out!</em> button, you should see a success response from the server. Now, clicking the <em>GET</em> button above should show your newly added speaker.
 <img src="/img/aspdotnetcore/confplanner/2/29.png" alt="" /></li>
</ol>

<hr />
<h2 id="sessions">Sessions</h2>

<p>This is series of articles on Building Conf planner app with Asp.net Core:</p>

<ul>
  <li><a href="/blog/CreateBackEndAPIproject" target="_blank">1 - Build the back-end API with basic EF model</a></li>
  <li><a href="/blog/BuildoutBackEndandRefactor" target="_blank">2 - Finish the back-end API and EF model, refactor into view modelsl</a></li>
  <li><a href="/blog/Addfront-endrenderagendasetupfront-endmodels" target="_blank">3 - Add front-end, render agenda, set up front-end models</a></li>
  <li><a href="/blog/Addauthfeatures" target="_blank">4 - Add authentication, add admin policy, allow editing sessions, users can sign-in with Identity, custom auth tag helper</a></li>
  <li><a href="/blog/Addpersonalagenda" target="_blank">5 - Add user association and personal agenda</a></li>
  <li><a href="/blog/ProductionReadinessandDeployment" target="_blank">6 - Deployment, Azure and other production environments, configuring environments, diagnostics</a></li>
  <li><a href="/blog/Challenges" target="_blank">7 - Challenges</a></li>
  <li><a href="/blog/SPAFrontEnd" target="_blank">8 - SPA front-end </a></li>
</ul>

<!--Section: Lesson UI-->
<section class="text-center">
    <hr />
   
    <div class="row">
        <div class="col-lg-4 col-md-6 col-sm-6">
            <a target="_blank" href="/blog/app-building-Workshop-start" class="btn  btn-sm" id="round-button">
                <i class="fas fa-arrow-left mr-2"></i>Previous Lesson
            </a>
        </div>
     
        <div class="col-lg-4 col-md-6 col-sm-6">
            <a target="_blank" href="/blog/BuildoutBackEndandRefactor" class="btn btn-sm" id="round-button">Next Lesson
                <i class="fas fa-arrow-right ml-2"></i>
            </a>
        </div>       
    </div>

</section>


                </div>

                

                <div id="disqus_thread"></div>
                <script>
                
                /**
                *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
                /*
                var disqus_config = function () {
                this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                };
                */
                (function() { // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');
                s.src = 'https://girishgodage-github-io.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



            </div>
        </div>
    </div>
    <!-- Go To Top-->
<button onclick="topFunction()"
id="myBtn"
title="Go to top"> <i class="fa fa-chevron-up"  style="font-size:36px"></i>
</button>
<!-- Footer-->
<footer class="main-footer">
    <div class="container">
        <div class="row">
            <div class="col-12 col-md-6 text-center text-lg-left">
                <p class="social">
                    <a href="https://www.facebook.com/girish.godage.5" class="external facebook wow fadeInUp">
                        <i class="fa fa-facebook"></i></a>
                    <a href="https://instagram.com/girishgodage_007" data-wow-delay="0.2s" class="external instagram wow fadeInUp">
                        <i class="fa fa-instagram"></i></a>
                    <a href="https://youtube.com/girishgodage" data-wow-delay="0.4s" class="external youtube wow fadeInUp">
                        <i class="fa fa-youtube-play"></i></a>
                    <a href="https://twitter.com/GGodage" data-wow-delay="0.4s" class="external twitter wow fadeInUp">
                            <i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/girishgodage" data-wow-delay="0.4s" class="external github wow fadeInUp">
                                <i class="fa fa-github"></i></a>    
                    <a href="mailto:girishgodage@gmail.com?subject=Hello%20Girish" data-wow-delay="0.6s" class="email wow fadeInUp">
                        <i class="fa fa-envelope"></i></a></p>
            </div>
            <div class="col-12 col-md-2">
            <h5>Quick Links</h5>
            <ul>
               <li><a href="http://localhost:4000#about">About</a></li>
               <li><a href="http://localhost:4000#contact">Contact</a></li>
               <li><a href="/sitemap.xml">Sitemap</a></li>               
            </ul>
         </div>
            <div class="col-12 col-md-4 text-center text-lg-right mt-4 mt-lg-0">
                <p> <b>©</b>2019 Girish Godage </p>
                <p class="text-center, text-shadow"> Hosted On <a href="https://pages.github.com/">GitHub Pages</a></p>
            </div>
        </div>
    </div>
</footer>
    <!-- Typed.js DONT TOUCH THIS! -->
    <div id="typed-strings">
    </div>

        <!-- JavaScript files-->
    <script src="http://localhost:4000/sitejs/jquery/jquery.min.js"></script>
    <script src="http://localhost:4000/sitejs/popper.js/umd/popper.min.js"> </script>
    <script src="http://localhost:4000/sitejs/bootstrap/js/bootstrap.min.js"></script>
    <script src="http://localhost:4000/sitejs/jquery.cookie/jquery.cookie.js"> </script>
    <script src="http://localhost:4000/sitejs/owl.carousel/owl.carousel.min.js"></script>
    <script src="http://localhost:4000/sitejs/waypoints/lib/jquery.waypoints.min.js"></script>
    <script src="http://localhost:4000/sitejs/jquery.counterup/jquery.counterup.js"></script>
    <script src="http://localhost:4000/js/front.js"></script>
    <script src="http://localhost:4000/js/comment.js"></script>
       <!-- Script pointing to search-script.js -->
    <script src="http://localhost:4000/js/search-script.js" type="text/javascript"></script>
   
    <!-- Configuration -->
    <script>
         SimpleJekyllSearch({
         searchInput: document.getElementById('search-input'),
         resultsContainer: document.getElementById('results-container'),
         json: '/search.json'
         })
         </script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.2.0/firebase.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.2.0/firebase-analytics.js"></script>

<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyC36FUDDdOTidZJ8nzS5vfE7KVyayenKPE",
    authDomain: "githubcontactlist.firebaseapp.com",
    databaseURL: "https://githubcontactlist.firebaseio.com",
    projectId: "githubcontactlist",
    storageBucket: "githubcontactlist.appspot.com",
    messagingSenderId: "899685398702",
    appId: "1:899685398702:web:0c23c56d2d6d40df37553f",
    measurementId: "G-YWBRCYJYFW"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
</script>
<script>
   $(function() {
      
    //make a variable to keep track of data coming from firebase
    var data = [];

    // Reference messages collection
      var messagesRef = firebase.database().ref('contactformmessages');  


    //listen to data updates from firebase
    messagesRef.on("value", function(snapshot) {
        console.log(snapshot.val());
        //when the data updates at firebase, put it in the data variable
        data = snapshot.val();
    })
    //Entire Contact Form (handler)
    $('#contactForm').submit(function(e) {
      e.preventDefault();

        var $form = $(this);
        console.log("Submit to Firebase");

        //disable submit button
        $form.find("#sendForm").prop('disabled', true);

        //get values to send to Firebase
        var name = $('#name').val();
        console.log(name);
		
		var surname = $('#surname').val();
        console.log(surname);
		
		var email = $('#email').val();
        console.log(email);	
		
		var phone = $('#phone').val();
        console.log(phone);

        var message = $('#message').val();
        console.log(message);

       
        //take the values from the form, and put them in an object
        var newContact = {
         "name": name,
			"surname": surname,
			"email": email,
			"phone": phone,
         "message": message
        }
        //put new object in data array
        data.push(newContact);
        console.log(data);

        //send the new data to Firebase
        messagesRef.set(data, function(err) {
            if (err) {
                alert("Data no go");
            }else{
            $("#form-wrapper").slideToggle();
            $('#form-success-message').slideToggle();
			}
        });

        return false;
    })
   
    
})
</script>

<script>

    function disableScrolling() {
        let x = window.scrollX;
        let y = window.scrollY;
        window.onscroll = function () { window.scrollTo(x, y); };
    }

    function enableScrolling() {
        window.onscroll = function () { };
    }

    // Add copy button
    let pres = document.getElementsByTagName('pre');
    Array.from(pres).forEach((element2) => {
        let element = document.createElement('button');
        element.setAttribute('class', 'btn btn-primary');
        element.innerHTML = 'Copy';
        element.style.float = 'right';

        element.addEventListener('click', (e) => {
            disableScrolling();
            console.log(e)
            let x = window.screenX;
            let y = window.screenY;

            element.innerHTML = 'copied';
            let tarea = document.createElement('textarea');
            tarea.innerHTML = element.parentElement.children[1].innerText;
            document.body.append(tarea);
            tarea.focus();
            tarea.select();
            document.execCommand('copy');
            tarea.style.display = 'none';
            setTimeout(() => {
                element.innerHTML = 'Copy';
            }, 2000);
            setTimeout(() => {
                enableScrolling();
            }, 0);
        })
        element2.insertBefore(element, element2.children[0]);
    })

    //Get the button
    myBtton = document.getElementById("myBtn");
    window.onscroll=function()
    {
        scrollFunction();
    }
    function scrollFunction(){
        if (document.body.scrollTop > 20 ||
        document.documentElement.scrollTop >20)
        {
            myBtton.style.display="block";           
        }else
        {
           myBtton.style.display="none";     
          
        }
    }
    //When user click on the top button
    function topFunction(){
      //  document.body.scrollTop =0;
      //  document.documentElement.scrollTop=0;
        $("html, body").animate({
            scrollTop: 0
        }, 600);
        return false;
    }

</script>

    
    


</body>

</html>