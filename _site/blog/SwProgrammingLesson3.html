<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#2A80EE">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#2A80EE">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#2A80EE">
<title>Girish Godage | Passionate Leader, who has a good command in technology & Management</title>
<meta name="description" content="I am a passionate Leader, who has a good command in technology & Mangement. Also, I am a creative designer and an innovatie techie.">
<meta name="keywords" content="Girish Godage, Girish Godage007, girish godage, girish, godage, girish godage, girish godage github blog, girish godage yt">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
    <link rel="canonical" href="https://girishgodage.github.io/index.html">
    <!-- Bootstrap CSS-->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <!-- Google fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Advent+Pro">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Varela+Round">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abel">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
   
    <!-- owl carousel-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.carousel.css" >
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.theme.css">
    
    <!-- animate.css-->
    <link rel="stylesheet" href="http://localhost:4000/sitejs/animate.css/animate.css">
    <!-- theme stylesheet-->
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="http://localhost:4000/css/custom.css" as="style">
    <link rel="stylesheet" href="http://localhost:4000/css/comments.css" as="style">
    <!-- Favicon-->
    <link rel="shortcut icon" href="http://localhost:4000/img/logo-big.png">
    <!-- Fab Icon-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-mfizz/2.4.1/font-mfizz.min.css">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130164763-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

         gtag('config', 'UA-130164763-2');
    </script>
    <!-- Typed.js DONT TOUCHHHHHHHHHHHHH!-->
    <!--<script src="https://cdn.rawgit.com/mattboldt/typed.js/master/lib/typed.min.js"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.9/typed.min.js"></script>
    <script>
        function copyToClipboard(element) {
            var $temp = $("<input>");
            $("body").append($temp);
            $temp.val($(element).text()).select();
            document.execCommand("copy");
            $temp.remove();
        }
      </script>
      
      <!-- START OF RELEVANT PART -->
    <script async src="https://just-comments.com/w2.js"></script>
    <!-- END OF RELEVANT PART -->


</head>

<body>
    <!-- navbar-->
<header class="header">
  <nav class="navbar navbar-expand-lg fixed-top">
    <div class="container"><a class="navbar-brand" href="http://localhost:4000"><img
          src="http://localhost:4000/img/logo-big.png" width="50" height="50" class="d-inline-block align-center"
          alt="logo"> <img src="http://localhost:4000/img/girish_logo.png" height="30" alt="girilogo"></a>
      <button type="button" data-toggle="collapse" data-target="#navbarcollapse" aria-controls="navbarSupportedContent"
        aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler navbar-toggler-right"><span
          class="fa fa-bars" style="color: white"></span></button>
      <div id="navbarcollapse" class="collapse navbar-collapse">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item"><a href="http://localhost:4000#home" class="nav-link  link-scroll">Home</a></li>
          <li class="nav-item"><a href="http://localhost:4000#about" class="nav-link link-scroll">About</a></li>
          <li class="nav-item"><a href="http://localhost:4000#skills" class="nav-link link-scroll">Skills</a>
          </li>
          <li class="nav-item"><a href="http://localhost:4000#services" class="nav-link link-scroll">Services</a>
          </li>
          <li class="nav-item"><a href="http://localhost:4000#references" class="nav-link link-scroll">My
              work</a></li>
          <li class="nav-item"><a href="http://localhost:4000#contact" class="nav-link link-scroll">Contact</a>
          </li>
          <li class="nav-item"><a href="http://localhost:4000/blog" class="nav-link link-scroll">Blog</a></li>
        </ul>
      </div>
    </div>
  </nav>
</header>
    
    <div style="background-color:Gray;">
        <div style="padding:0;min-height:95.05vh;display:flex;font-family: Poppins, sans-serif;margin-top: 5rem;"
            class="container">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <p class="post-title">
                    <h1><a href="/blog/SwProgrammingLesson3">Introduction To Aspect Oriented Programming and Cross Cutting Concerns</a></h1>
                </p>
                
                <span class="post-date"><span style="font-weight:600">October 15, 2019 Tuesday</span> by
                    <a style="font-weight:600" href="https://twitter.com/girishgodage_007" target="_blank">Girish Godage</a>
                </span>
                <div class="site-category"> 
                        <h5>SoftwareProgramming</h5>
                </div>
                
                <hr>
                <div><img class="post-image" src="https://girishgodage.github.io/img/sw_program.png" alt="Introduction To Aspect Oriented Programming and Cross Cutting Concerns" height="250" /></div>
                <div class="post-content">
                    <br>
                    <p>Software applications are built in layers. There is common functionality that is sometimes needed across layers - logging, performance tracing etc.</p>

<p>How do you implement these common features?</p>

<h3 id="you-will-learn">You will learn?</h3>
<ul>
  <li>What Is Aspect Oriented Programming?</li>
  <li>What are the important concepts behind Aspect-Oriented Programming?</li>
  <li>What are the situations where AOP is used?</li>
  <li>Why is AOP needed?</li>
  <li>What are the best Java frameworks to implement AOP?</li>
</ul>

<h3 id="what-is-aspect-oriented-programming">What Is Aspect Oriented Programming?</h3>

<p>In order to understand what <strong>Aspect Oriented Programming (AOP)</strong> is all about, let’s first talk about <strong>layered architecture</strong>, and  something called <strong>cross-cutting concerns</strong>.</p>

<h4 id="what-is-a-layered-architecture">What is a Layered Architecture</h4>

<p>Whenever we design and develop a large software application, we make use of  a <strong>layered architecture</strong>. For instance, in a web application, it is quite common to see an architecture similar to the following:</p>

<p><img src="/images/Capture-02-01.png" alt="image info" /></p>

<p>Here, we see that the application is organized into a Web layer, a Business layer, and a Data layer.</p>

<h4 id="understanding-cross-cutting-concerns">Understanding Cross Cutting Concerns</h4>

<p>In a layered architecture, there are specific parts that are common to all these different layers. Such parts include:</p>

<ul>
  <li>Logging</li>
  <li>Security</li>
  <li>Performance</li>
  <li>Auditing</li>
</ul>

<p>All these features are applicable across layers, hence it makes sense to implement them in a common way.</p>

<p>Let’s say you want to implement logic to find out how much time each method takes to execute, in each of the three layers (Web, Business and Data) above.</p>

<p>That’s where AOP steps in.</p>

<h4 id="an-example-of-aop">An Example Of AOP</h4>

<p>Let’s now look at a simple example where we apply AOP.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
	<span class="nd">@Component</span>
	<span class="kd">class</span> <span class="nc">HiByeService</span> <span class="o">{</span>
	  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sayHi</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
	    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hi "</span> <span class="o">+</span> <span class="n">name</span><span class="o">);</span>
	  <span class="o">}</span>
	
	  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sayBye</span><span class="o">()</span> <span class="o">{</span>
	    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Bye"</span><span class="o">);</span>
	  <span class="o">}</span>
	
	  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">returnSomething</span><span class="o">()</span> <span class="o">{</span>
	    <span class="k">return</span> <span class="s">"Hi Bye"</span><span class="o">;</span>
	  <span class="o">}</span>
	<span class="o">}</span>
</code></pre></div></div>

<p>The <code class="highlighter-rouge">class</code> <code class="highlighter-rouge">HiByeService</code> has a few methods such as <code class="highlighter-rouge">sayHi()</code>, <code class="highlighter-rouge">sayBye()</code> and <code class="highlighter-rouge">returnSomething()</code> defined within it.</p>

<p>We want to do a few computations by taking up each of these methods, by turn at the following stages:</p>
<ul>
  <li>Do something before the method begins execution</li>
  <li>Do something after the method completes execution</li>
  <li>Track how much time the method takes during its execution</li>
</ul>

<p>Here we take <code class="highlighter-rouge">HiByeService</code> as a specific example to work with. The same could be done across several classes that make up such an application.</p>

<p>Let’s take each of these computations and look at them in some detail.</p>

<h4 id="doing-stuff-before-execution">Doing Stuff Before Execution</h4>

<p>Have a look at the following AOP code:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
	<span class="nd">@Aspect</span>
	<span class="nd">@Component</span>
	<span class="kd">class</span> <span class="nc">MyAspect</span> <span class="o">{</span>
	  <span class="nd">@Before</span><span class="o">(</span><span class="s">"execution(* HiByeService.*(..))"</span><span class="o">)</span>
	  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">before</span><span class="o">(</span><span class="nc">JoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> <span class="o">{</span>
	    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"Before "</span><span class="o">);</span>
	    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
	    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">joinPoint</span><span class="o">.</span><span class="na">getArgs</span><span class="o">()));</span>
	  <span class="o">}</span>
</code></pre></div></div>

<p>We first define an <strong>aspect</strong> with the annotation <code class="highlighter-rouge">@Aspect</code> for the <code class="highlighter-rouge">class</code> <code class="highlighter-rouge">MyAspect</code>. Within it is another annotation, <code class="highlighter-rouge">@Before</code> that describes the method <code class="highlighter-rouge">before()</code>. The idea of this aspect is that whatever logic lies in the <code class="highlighter-rouge">before()</code> body, is executed before any method of <code class="highlighter-rouge">HiByeService</code> is run. Note that in the <code class="highlighter-rouge">@Before</code> annotation, a package name could also be mentioned instead of a class name. This aspect would then be executed before any method in the entire package.</p>

<h4 id="doing-stuff-after-execution">Doing Stuff After Execution</h4>

<p>Similar to this, it is also possible to define an aspect to execute after every method within <code class="highlighter-rouge">HiByeService</code> is run:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
	<span class="nd">@AfterReturning</span><span class="o">(</span><span class="n">pointcut</span> <span class="o">=</span> <span class="s">"execution(* HiByeService.*(..))"</span>
	                    <span class="o">,</span> <span class="n">returning</span> <span class="o">=</span> <span class="s">"result"</span><span class="o">)</span>
	  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">after</span><span class="o">(</span><span class="nc">JoinPoint</span> <span class="n">joinPoint</span><span class="o">,</span> <span class="nc">Object</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
	    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"After "</span><span class="o">);</span>
	    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">joinPoint</span><span class="o">.</span><span class="na">getSignature</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
	    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">" result is "</span> <span class="o">+</span> <span class="n">result</span><span class="o">);</span>
	  <span class="o">}</span>
	<span class="o">}</span>

</code></pre></div></div>

<p>For this, you need to define a method with an <code class="highlighter-rouge">@AfterReturning</code> annotation, defined above for the <code class="highlighter-rouge">after()</code> method. This method here takes an extra argument to store the result of execution of the method of <code class="highlighter-rouge">HiByeService</code>.</p>

<h4 id="doing-stuff-around-execution">Doing Stuff Around Execution</h4>

<p>An additional thing you can do is define an aspect around the execution of a method:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
	<span class="nd">@Around</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"execution(* HiByeService.*(..))"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">around</span><span class="o">(</span><span class="nc">ProceedingJoinPoint</span> <span class="n">joinPoint</span><span class="o">)</span> 
	                                      <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
	  <span class="kt">long</span> <span class="n">startTime</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">().</span><span class="na">getTime</span><span class="o">();</span>
	  <span class="nc">Object</span> <span class="n">result</span> <span class="o">=</span> <span class="n">joinPoint</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
	  <span class="kt">long</span> <span class="n">endTime</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">().</span><span class="na">getTime</span><span class="o">();</span>
	  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"Execution Time - "</span> 
	                  <span class="o">+</span> <span class="o">(</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">startTime</span><span class="o">));</span>
	<span class="o">}</span>

</code></pre></div></div>

<p>Over here, we have made use of an annotation called <code class="highlighter-rouge">@Around</code> to decorate the <code class="highlighter-rouge">around()</code> method.</p>

<p>In this method body, we intercept the call to the method in <code class="highlighter-rouge">HiByeService</code> in the following manner:</p>

<ul>
  <li>We make note of the start time of execution</li>
  <li>Allow the method to run its course</li>
  <li>Finally, we make note of the end time of execution</li>
</ul>

<p>We then output the computed execution time of that method.</p>

<h4 id="how-to-make-use-of-aop">How To Make Use Of AOP</h4>

<p>At a high level, AOP allows you to intercept calls to methods, and perform logic around these calls. We have used annotations to decorate our computations within the aspect.</p>

<p>In our examples above, we have restricted ourselves to a single class. However, we could easily extend it to more classes or packages by <em>varying</em> the <strong>regular expression</strong> we use in the annotations.</p>

<p>For example, we could choose to intercept classes pertaining to the web layer, or classes across all three layers of the example web application.</p>

<h4 id="terms-we-use-in-aop">Terms We Use In AOP</h4>

<p>Let’s now look at some important terms we use when talking about AOP.</p>

<ul>
  <li><strong>Point Cut</strong> : It refers to the regular expression that defines what methods need to be intercepted by this aspect. It essentially says where the logic within an aspect method is applicable.</li>
  <li><strong>Advice</strong> : This is nothing but the logic within the aspect method. It describes what we do when the Point Cut expression is matched.</li>
  <li><strong>Aspect</strong>: The combination of the Point Cut and the Advice</li>
  <li><strong>Join Point</strong>: This refers to the situation where a method’s execution has been intercepted, and the aspect is in execution</li>
  <li><strong>Weaving</strong>: The entire process of taking a method, intercepting its execution and applying an aspect to its execution. This is the functionality provided by the AOP framework. Examples of AOP frameworks are <strong>SpringAOP</strong> and <strong>AspectJ</strong>.</li>
</ul>

<h4 id="aop-in-summary">AOP In Summary</h4>

<p>In this article, we looked at Aspect Oriented Programming (AOP). We talked about cross-cutting concerns, and described the situations where AOP can be used. In particular, we saw examples of how we can define a point cut, and define the logic of an aspect. We focused on how we can specify aspects to run before, after or around the execution of a method. We then examined the important terms that describe AOP concepts.</p>

<!--Section: Lesson UI-->
<section class="text-center">
    <hr />
   
    <div class="row">
        <div class="col-lg-4 col-md-6 col-sm-6">
            <a target="_blank" href="https://girishgodage.github.io/blog/SwProgrammingLesson2" class="btn  btn-sm" id="round-button">
                <i class="fas fa-arrow-left mr-2"></i>Previous Lesson
            </a>
        </div>
     
        <div class="col-lg-4 col-md-6 col-sm-6">
            <a target="_blank" href="https://girishgodage.github.io/blog/SwProgrammingLesson3" class="btn btn-sm" id="round-button">Next Lesson
                <i class="fas fa-arrow-right ml-2"></i>
            </a>
        </div>       
    </div>

</section>


                </div>

                <div id="disqus_thread"></div>
                <script>
                
                /**
                *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
                /*
                var disqus_config = function () {
                this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                };
                */
                (function() { // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');
                s.src = 'https://girishgodage-github-io.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



            </div>
        </div>
    </div>
    <!-- Footer-->

<footer class="main-footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 text-center text-lg-left">
                <p class="social">
                    <a href="https://www.facebook.com/girish.godage.5" class="external facebook wow fadeInUp">
                        <i class="fa fa-facebook"></i></a>
                    <a href="https://instagram.com/girishgodage_007" data-wow-delay="0.2s" class="external instagram wow fadeInUp">
                        <i class="fa fa-instagram"></i></a>
                    <a href="https://youtube.com/girishgodage" data-wow-delay="0.4s" class="external youtube wow fadeInUp">
                        <i class="fa fa-youtube-play"></i></a>
                    <a href="https://twitter.com/GGodage" data-wow-delay="0.4s" class="external twitter wow fadeInUp">
                            <i class="fa fa-twitter"></i></a>
                    <a href="https://github.com/girishgodage" data-wow-delay="0.4s" class="external github wow fadeInUp">
                                <i class="fa fa-github"></i></a>    
                    <a href="mailto:girishgodage@gmail.com?subject=Hello%20Girish" data-wow-delay="0.6s" class="email wow fadeInUp">
                        <i class="fa fa-envelope"></i></a></p>
            </div>
            <div class="col-md-6 text-center text-lg-right mt-4 mt-lg-0">
                <p> <b>©</b>2019 Girish Godage </p>
                <p class="text-center, text-shadow"> Hosted On <a href="https://pages.github.com/">GitHub Pages</a></p>
            </div>
        </div>
    </div>
</footer>
    <!-- Typed.js DONT TOUCH THIS! -->
    <div id="typed-strings">
    </div>

        <!-- JavaScript files-->
    <script src="http://localhost:4000/sitejs/jquery/jquery.min.js"></script>
    <script src="http://localhost:4000/sitejs/popper.js/umd/popper.min.js"> </script>
    <script src="http://localhost:4000/sitejs/bootstrap/js/bootstrap.min.js"></script>
    <script src="http://localhost:4000/sitejs/jquery.cookie/jquery.cookie.js"> </script>
    <script src="http://localhost:4000/sitejs/owl.carousel/owl.carousel.min.js"></script>
    <script src="http://localhost:4000/sitejs/waypoints/lib/jquery.waypoints.min.js"></script>
    <script src="http://localhost:4000/sitejs/jquery.counterup/jquery.counterup.js"></script>
    <script src="http://localhost:4000/js/front.js"></script>
    <script src="http://localhost:4000/js/comment.js"></script>
       <!-- Script pointing to search-script.js -->
    <script src="http://localhost:4000/js/search-script.js" type="text/javascript"></script>
   
    <!-- Configuration -->
    <script>
         SimpleJekyllSearch({
         searchInput: document.getElementById('search-input'),
         resultsContainer: document.getElementById('results-container'),
         json: '/search.json'
         })
         </script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.2.0/firebase.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.2.0/firebase-analytics.js"></script>

<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyC36FUDDdOTidZJ8nzS5vfE7KVyayenKPE",
    authDomain: "githubcontactlist.firebaseapp.com",
    databaseURL: "https://githubcontactlist.firebaseio.com",
    projectId: "githubcontactlist",
    storageBucket: "githubcontactlist.appspot.com",
    messagingSenderId: "899685398702",
    appId: "1:899685398702:web:0c23c56d2d6d40df37553f",
    measurementId: "G-YWBRCYJYFW"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
</script>
<script>
   $(function() {
      
    //make a variable to keep track of data coming from firebase
    var data = [];

    // Reference messages collection
      var messagesRef = firebase.database().ref('contactformmessages');  


    //listen to data updates from firebase
    messagesRef.on("value", function(snapshot) {
        console.log(snapshot.val());
        //when the data updates at firebase, put it in the data variable
        data = snapshot.val();
    })
    //Entire Contact Form (handler)
    $('#contactForm').submit(function(e) {
      e.preventDefault();

        var $form = $(this);
        console.log("Submit to Firebase");

        //disable submit button
        $form.find("#sendForm").prop('disabled', true);

        //get values to send to Firebase
        var name = $('#name').val();
        console.log(name);
		
		var surname = $('#surname').val();
        console.log(surname);
		
		var email = $('#email').val();
        console.log(email);	
		
		var phone = $('#phone').val();
        console.log(phone);

        var message = $('#message').val();
        console.log(message);

       
        //take the values from the form, and put them in an object
        var newContact = {
         "name": name,
			"surname": surname,
			"email": email,
			"phone": phone,
         "message": message
        }
        //put new object in data array
        data.push(newContact);
        console.log(data);

        //send the new data to Firebase
        messagesRef.set(data, function(err) {
            if (err) {
                alert("Data no go");
            }else{
            $("#form-wrapper").slideToggle();
            $('#form-success-message').slideToggle();
			}
        });

        return false;
    })
   
    
})
</script>

<script>

    function disableScrolling() {
        let x = window.scrollX;
        let y = window.scrollY;
        window.onscroll = function () { window.scrollTo(x, y); };
    }

    function enableScrolling() {
        window.onscroll = function () { };
    }

    // Add copy button
    let pres = document.getElementsByTagName('pre');
    Array.from(pres).forEach((element2) => {
        let element = document.createElement('button');
        element.setAttribute('class', 'btn btn-primary');
        element.innerHTML = 'Copy';
        element.style.float = 'right';

        element.addEventListener('click', (e) => {
            disableScrolling();
            console.log(e)
            let x = window.screenX;
            let y = window.screenY;

            element.innerHTML = 'copied';
            let tarea = document.createElement('textarea');
            tarea.innerHTML = element.parentElement.children[1].innerText;
            document.body.append(tarea);
            tarea.focus();
            tarea.select();
            document.execCommand('copy');
            tarea.style.display = 'none';
            setTimeout(() => {
                element.innerHTML = 'Copy';
            }, 2000);
            setTimeout(() => {
                enableScrolling();
            }, 0);
        })
        element2.insertBefore(element, element2.children[0]);
    })

</script>

    


</body>

</html>